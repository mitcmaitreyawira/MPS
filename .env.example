# =============================================================================
# MPS CLASSROOM MANAGEMENT - ENVIRONMENT CONFIGURATION
# =============================================================================
# Copy this file to .env and modify the values as needed for your environment.
# This file contains all configuration options for both development and production.
#
# USAGE:
# - For development: Copy to .env and use default values
# - For production: Copy to .env and change all secrets/passwords
# - Docker: Environment variables are automatically picked up by docker-compose

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================
NODE_ENV=development
PORT=3001
API_PREFIX=api/v1

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# MongoDB connection string - unified for both dev and production
MONGODB_URI=mongodb://admin:password@localhost:27017/mps_db_unified?authSource=admin

# Docker MongoDB settings (used by docker-compose)
MONGO_INITDB_ROOT_USERNAME=admin
MONGO_INITDB_ROOT_PASSWORD=password
MONGO_INITDB_DATABASE=mps_db_unified

# Redis cache configuration
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=redispassword

# =============================================================================
# JWT & AUTHENTICATION
# =============================================================================
# JWT & Authentication - unified configuration
# For development, you can use JWT_SECRET for simplicity
# For production, use separate access/refresh secrets for enhanced security
JWT_SECRET=dev-jwt-secret-key
JWT_ACCESS_SECRET=your-super-secret-jwt-key-change-in-production
JWT_REFRESH_SECRET=your-super-secret-refresh-key-change-in-production
JWT_EXPIRES_IN=24h
JWT_ACCESS_EXPIRES_IN=24h
JWT_REFRESH_EXPIRES_IN=7d
JWT_COOKIE_DOMAIN=localhost

# =============================================================================
# FRONTEND CONFIGURATION
# =============================================================================
# Backend API URL for frontend
VITE_API_URL=http://localhost:3001/api/v1

# Frontend URLs (for password reset emails)
FRONTEND_URL=http://localhost:5173
PASSWORD_RESET_URL=${FRONTEND_URL}/reset-password

# CORS settings
CORS_ORIGIN=http://localhost:5173

# =============================================================================
# EMAIL CONFIGURATION
# =============================================================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password
SMTP_FROM=noreply@yourapp.com

# =============================================================================
# SECURITY SETTINGS
# =============================================================================
# Password hashing
BCRYPT_ROUNDS=12

# Multi-factor authentication
MFA_ISSUER=MPS Classroom Management

# Password policy
PASSWORD_MIN_LENGTH=12
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBER=true
PASSWORD_REQUIRE_SPECIAL_CHAR=true
PASSWORD_MAX_AGE_DAYS=90
PASSWORD_HISTORY_SIZE=5

# Account security
MAX_LOGIN_ATTEMPTS=5
ACCOUNT_LOCKOUT_MINUTES=15

# Rate limiting
THROTTLE_TTL=60
THROTTLE_LIMIT=100

# File uploads
MAX_FILE_SIZE=10485760
UPLOAD_DEST=./uploads

# Cache settings
CACHE_TTL=300

# API Documentation
ENABLE_SWAGGER=true

# =============================================================================
# FIREBASE CONFIGURATION (Optional)
# =============================================================================
# Replace with your Firebase project values or leave empty if not using Firebase
VITE_FIREBASE_API_KEY=
VITE_FIREBASE_AUTH_DOMAIN=
VITE_FIREBASE_PROJECT_ID=
VITE_FIREBASE_STORAGE_BUCKET=
VITE_FIREBASE_MESSAGING_SENDER_ID=
VITE_FIREBASE_APP_ID=
VITE_FIREBASE_MEASUREMENT_ID=

# =============================================================================
# PRODUCTION SAFETY
# =============================================================================
# Set to true in production to enforce HTTPS
FORCE_HTTPS=false

# =============================================================================
# SEEDING & TESTING
# =============================================================================
# Default admin credentials (used by seeding scripts)
SEED_ADMIN_EMAIL=admin@mps.com
SEED_ADMIN_PASSWORD=Admin123!
SEED_TEACHER_EMAIL=teacher@mps.com
SEED_TEACHER_PASSWORD=Teacher123!

# Pre-hashed passwords for CI/CD (optional)
# SEED_ADMIN_PASSWORD_HASH=
# SEED_TEACHER_PASSWORD_HASH=

# =============================================================================
# DOCKER COMPOSE CONFIGURATION
# =============================================================================
# These variables are used by both docker-compose.yml and docker-compose.dev.yml
# All services will use environment variable substitution with fallback defaults
#
# Development: Use docker-compose.dev.yml with .env file
# Production: Use docker-compose.yml with .env file containing production values