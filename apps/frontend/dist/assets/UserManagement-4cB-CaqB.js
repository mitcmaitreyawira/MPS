import{j as e,I as D,W as Y,r as m,c as K,U as H,b as W,X as Q,q as u,a as Z,B as V,Y as ee}from"./index-JBX9P6Qg.js";import{A as se}from"./AdminDashboard-CCkNeIC3.js";import{M as ae}from"./Modal-NYefmAjZ.js";import{S as L}from"./Select-BM0zQtf0.js";import{S as te}from"./StudentStatsDisplay-BBTp0fHw.js";import{U as re,S as ne,v as le}from"./validation-CkSfakBh.js";import{C as B}from"./ConfirmationModal-CPL5EhPs.js";import{u as q}from"./useDebounce-CwzWEB2R.js";import"./BadgeIconRenderer-BjlOxHvs.js";import"./helpers-snl2sRJ-.js";const ie=({filters:s,onFiltersChange:h,placeholder:b="Search by name, email, NISN, or username...",className:d=""})=>{const j=v=>{h({...s,search:v})};return e.jsx("div",{className:`space-y-4 ${d}`,children:e.jsx("div",{className:"relative",children:e.jsx(D,{type:"text",placeholder:b,value:s.search,onChange:v=>j(v.target.value),leftIcon:e.jsx(Y,{className:"h-4 w-4"}),className:"w-full"})})})};function de(s,h,b={}){const{debounceMs:d=300,maxResults:j=1e3,enableVirtualization:v=!0}=b,i=q(h.search,d),t=q(h,d),f=m.useCallback((o,a)=>{if(!a)return!0;const x=a.toLowerCase();return[o.firstName,o.lastName,o.nisn,o.name,`${o.firstName} ${o.lastName}`.trim()].filter(Boolean).some(l=>l==null?void 0:l.toLowerCase().includes(x))},[]),g=m.useCallback((o,a)=>!a||a==="all"?!0:Array.isArray(o.roles)?o.roles.includes(a):o.role?o.role===a:!1,[]),k=m.useCallback((o,a)=>a?o.classId===a:!0,[]),I=m.useCallback((o,a)=>a?!0:!o.isArchived,[]),C=m.useCallback((o,a,x,U)=>{let l,r;switch(x){case"firstName":l=o.firstName||"",r=a.firstName||"";break;case"lastName":l=o.lastName||"",r=a.lastName||"";break;case"email":l=o.nisn||"",r=a.nisn||"";break;case"username":l=o.name||"",r=a.name||"";break;case"nisn":l=o.nisn||"",r=a.nisn||"";break;case"points":l=o.points||0,r=a.points||0;break;case"createdAt":default:l=`${o.firstName||""} ${o.lastName||""}`.trim(),r=`${a.firstName||""} ${a.lastName||""}`.trim();break}let w=0;return typeof l=="object"&&typeof r=="object"&&l&&r&&"getTime"in l&&"getTime"in r?w=l.getTime()-r.getTime():typeof l=="number"&&typeof r=="number"?w=l-r:w=String(l).localeCompare(String(r)),U==="asc"?w:-w},[]),{filteredUsers:M,totalCount:n,searchStats:P}=m.useMemo(()=>{const o=performance.now();if(!s||s.length===0)return{filteredUsers:[],totalCount:0,searchStats:{totalUsers:0,filteredCount:0,searchTerm:i,activeFilters:0}};const a=[t.search,t.role&&t.role!=="all",t.classId,!t.includeArchived,t.sortBy!=="firstName"||t.sortOrder!=="asc"].filter(Boolean).length;let x=s;t.classId&&(x=x.filter(r=>k(r,t.classId))),t.role&&t.role!=="all"&&(x=x.filter(r=>g(r,t.role))),t.includeArchived||(x=x.filter(r=>I(r,t.includeArchived))),i&&(x=x.filter(r=>f(r,i))),x.length>1&&x.sort((r,w)=>C(r,w,t.sortBy,t.sortOrder));const U=v?x:x.slice(0,j),l=performance.now();return console.log(`User search completed in ${(l-o).toFixed(2)}ms`),console.log(`Filtered ${s.length} users down to ${x.length} results`),{filteredUsers:U,totalCount:x.length,searchStats:{totalUsers:s.length,filteredCount:x.length,searchTerm:i,activeFilters:a}}},[s,t,i,f,g,k,I,C,j,v]),A=m.useMemo(()=>h.search!==i||JSON.stringify(h)!==JSON.stringify(t),[h,i,t]);return{filteredUsers:M,totalCount:n,isFiltering:A,searchStats:P}}const ce=({users:s,classes:h})=>{const b=m.useMemo(()=>{const d=[],j=i=>{if(!i)return"No Class Assigned";const t=h.find(g=>g.id===i||g._id===i);if(!t||!t.headTeacherId)return"No Head Teacher";const f=s.find(g=>(g.id===t.headTeacherId||g._id===t.headTeacherId)&&g.roles&&(g.roles.includes("teacher")||g.roles.includes("head_of_class")));return f?f.name||`${f.firstName||""} ${f.lastName||""}`.trim()||"Unknown Teacher":"Head Teacher Not Found"},v=i=>{if(!i)return"No Class";const t=h.find(f=>f.id===i||f._id===i);return(t==null?void 0:t.name)||"Unknown Class"};return s.forEach(i=>{var g;const t=i.name||`${i.firstName||""} ${i.lastName||""}`.trim()||"Unknown User",f=((g=i.roles)==null?void 0:g[0])||i.role||"user";d.push({id:i.id,name:t,nisn:i.nisn||"N/A",gender:"Not Specified",className:v(i.classId),headTeacherName:j(i.classId),role:f.charAt(0).toUpperCase()+f.slice(1),points:i.points||0,badge:"None",streakDay:0})}),d.sort((i,t)=>i.className!==t.className?i.className.localeCompare(t.className):i.role!==t.role?i.role==="Teacher"?-1:1:i.name.localeCompare(t.name))},[s,h]);return e.jsx(K,{icon:e.jsx(H,{className:"h-6 w-6 text-primary"}),title:"User Management List",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"overflow-x-auto max-h-[70vh] overflow-y-auto border border-gray-200 dark:border-gray-700 rounded-lg",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"NISN"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Gender"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Class"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Point Head (Head Teacher)"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Badge"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Streak Day"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Points"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:b.map((d,j)=>e.jsxs("tr",{className:`hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors ${j%2===0?"bg-white dark:bg-gray-900":"bg-gray-50 dark:bg-gray-800"}`,children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium text-primary",children:d.name.charAt(0).toUpperCase()})})}),e.jsx("div",{className:"ml-4",children:e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:d.name})})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:d.nisn}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${d.gender==="Male"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":d.gender==="Female"?"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}`,children:d.gender})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${d.role==="Teacher"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"}`,children:d.role})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:d.className}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:d.headTeacherName}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${d.badge!=="None"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}`,children:d.badge})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${d.streakDay>7?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":d.streakDay>0?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}`,children:[d.streakDay," days"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${d.points>50?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":d.points>0?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}`,children:[d.points," pts"]})})]},d.id))})]})}),b.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(H,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No users found to display."})]})]})})},G=m.memo(({user:s,users:h,classes:b,points:d,onDone:j})=>{const{updateUser:v}=W(),[i,t]=m.useState(!1),[f,g]=m.useState(null),[k,I]=m.useState(!1),[C,M]=m.useState(""),[n,P]=m.useState({name:(s==null?void 0:s.name)||"",nisn:(s==null?void 0:s.nisn)||"",password:"",role:(s==null?void 0:s.role)||u.STUDENT,classId:(s==null?void 0:s.classId)||"",childIds:(s==null?void 0:s.childIds)||[],subject:(s==null?void 0:s.subject)||""}),[A,o]=m.useState(""),[a,x]=m.useState({}),[U,l]=m.useState([]),[r]=m.useState(()=>new re(h));m.useEffect(()=>{r.updateExistingUsers(h)},[h,r]);const w=(c,p)=>{let y=r.validateField(c,p,n,s==null?void 0:s.id);if(c==="classId"&&p&&p.trim()!==""){const N=le(p);N.isValid||(y={message:N.error||"Invalid class ID format"})}x(N=>{const E={...N};return y?E[c]=y:delete E[c],E})},z=m.useMemo(()=>h.filter(c=>c.role===u.STUDENT&&!c.isArchived),[h]),R=m.useMemo(()=>!s||s.role!==u.STUDENT?null:h.find(c=>{var p;return c.role===u.PARENT&&((p=c.childIds)==null?void 0:p.includes(s.id))}),[s,h]),J=c=>{P({...n,childIds:c})},F=c=>{const{name:p,value:y}=c.target,N={...n,[p]:y};p==="role"&&(y!==u.PARENT&&(N.childIds=[]),y!==u.STUDENT&&y!==u.HEAD_OF_CLASS&&(N.classId="")),P(N),setTimeout(()=>w(p,y),0)},_=c=>{const{name:p,value:y}=c.target;p==="confirmPassword"?(o(y),setTimeout(()=>{n.password&&y&&n.password!==y?x(N=>({...N,confirmPassword:{field:"confirmPassword",message:"Passwords do not match",type:"mismatch"}})):x(N=>{const E={...N};return delete E.confirmPassword,E})},0)):F(c)},X=async c=>{var y,N,E;c.preventDefault(),g(null),l([]);const p=r.validateUser(n,!!s,s==null?void 0:s.id,A);if(!p.isValid){const S=p.errors.map(T=>`${T.field}: ${T.message}`).join(`
`);g(`❌ Validation Failed

${S}

Please correct the errors above and try again.`);const O={};p.errors.forEach(T=>{O[T.field]=T}),x(O);return}p.warnings.length>0&&l(p.warnings),t(!0);try{const S={name:n.name,nisn:n.nisn,role:n.role,classId:n.classId,childIds:n.childIds,subject:n.subject,...n.password&&{password:n.password}};await v(s.id,S),M("User updated successfully."),I(!0),setTimeout(()=>j(),1500)}catch(S){console.error("Error creating/updating user:",S);const O=await ee.handleError(S,{operation:"updateUser",context:"UserForm",formData:{...n,password:"[REDACTED]"}});if(((y=S.response)==null?void 0:y.status)===409){const T=((E=(N=S.response)==null?void 0:N.data)==null?void 0:E.message)||S.message||"A user with this information already exists";T.toLowerCase().includes("email")?(g("This email address is already registered. Please use a different email address or check if the user already exists."),x($=>({...$,email:{field:"email",message:"This email is already registered",type:"duplicate"}}))):T.toLowerCase().includes("nisn")?x($=>({...$,nisn:{field:"nisn",message:"This NISN is already registered",type:"duplicate"}})):T.toLowerCase().includes("username")?x($=>({...$,username:{field:"username",message:"This username is already taken",type:"duplicate"}})):g(T)}else g(O.userMessage||S.message||"Failed to update user");console.error("[UserForm] Error creating user:",S)}finally{t(!1)}};return k?e.jsxs("div",{className:"text-center p-6 animate-fade-in",children:[e.jsx("div",{className:"animate-bounce",children:e.jsx(Z,{className:"mx-auto h-16 w-16 text-green-500"})}),e.jsx("h3",{className:"mt-4 text-xl font-semibold text-text-primary",children:"Success!"}),e.jsx("p",{className:"mt-3 text-base text-text-secondary",children:C}),e.jsxs("div",{className:"mt-6 space-y-2",children:[e.jsx("div",{className:"text-sm text-green-600 bg-green-50 rounded-lg p-3",children:"✅ User has been updated successfully"}),e.jsx(V,{onClick:j,className:"mt-4",variant:"secondary",children:"Close"})]})]}):e.jsxs("form",{onSubmit:X,className:"space-y-4",children:[s&&s.role===u.STUDENT&&e.jsx(te,{user:s,points:d,awards:[]}),U.length>0&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-3",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("span",{className:"text-yellow-400",children:"⚠️"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Validation Warnings"}),e.jsx("div",{className:"mt-2 text-sm text-yellow-700",children:e.jsx("ul",{className:"list-disc pl-5 space-y-1",children:U.map((c,p)=>e.jsx("li",{children:c.message},p))})})]})]})}),e.jsxs("div",{children:[e.jsx(D,{name:"name",value:n.name,onChange:F,placeholder:"Full Name",required:!0,className:a.name?"border-red-500":""}),a.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.name.message})]}),e.jsxs("div",{children:[e.jsx(D,{name:"nisn",value:n.nisn,onChange:F,placeholder:"NISN / User ID",required:!0,className:a.nisn?"border-red-500":""}),a.nisn&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.nisn.message})]}),e.jsxs("div",{children:[e.jsx(L,{name:"role",value:n.role,onChange:F,className:a.role?"border-red-500":"",children:Object.values(u).map(c=>e.jsx("option",{value:c,children:c.replace(/_/g," ").replace(/\b\w/g,p=>p.toUpperCase())},c))}),a.role&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.role.message})]}),(n.role===u.TEACHER||n.role===u.HEAD_OF_CLASS)&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Subject(s)"}),e.jsx(D,{name:"subject",value:n.subject||"",onChange:F,placeholder:"e.g., Mathematics, Science, English",className:a.subject?"border-red-500":""}),a.subject&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.subject.message}),e.jsx("p",{className:"mt-1 text-xs text-text-secondary",children:"Enter the subject(s) this teacher teaches, separated by commas"})]}),(n.role===u.STUDENT||n.role===u.HEAD_OF_CLASS)&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:n.role===u.HEAD_OF_CLASS?"Head Teacher of Class":"Student Class"}),e.jsxs(L,{name:"classId",value:n.classId||"",onChange:F,required:!0,children:[e.jsx("option",{value:"",children:n.role===u.HEAD_OF_CLASS?"Select class to lead...":"Assign a class..."}),b.map(c=>e.jsx("option",{value:c.id,children:c.name},c.id))]}),n.role===u.HEAD_OF_CLASS&&e.jsx("p",{className:"mt-1 text-xs text-text-secondary",children:"This teacher will be the head teacher of the selected class"})]}),n.role===u.TEACHER&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Teaching Classes (Optional)"}),e.jsxs(L,{name:"classId",value:n.classId||"",onChange:F,children:[e.jsx("option",{value:"",children:"No specific class assigned"}),b.map(c=>e.jsx("option",{value:c.id,children:c.name},c.id))]}),e.jsx("p",{className:"mt-1 text-xs text-text-secondary",children:"Teachers can teach multiple classes, but this sets their primary class"})]}),n.role===u.PARENT&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Assigned Children"}),e.jsx(ne,{users:z,selectedUserIds:n.childIds||[],onSelectionChange:J,placeholder:"Search and add children..."})]}),s&&s.role===u.STUDENT&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Assigned Parent"}),e.jsx(D,{type:"text",value:R?R.name:"No parent assigned",readOnly:!0,disabled:!0,className:"bg-slate-100 cursor-not-allowed"})]}),e.jsxs("div",{className:"space-y-4",children:[s&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-3 mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("span",{className:"text-blue-400",children:"ℹ️"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Current Password"}),e.jsxs("div",{className:"mt-1 text-sm text-blue-700",children:[e.jsxs("p",{children:["User Password: ",s.password||"Password not available for security reasons"]}),e.jsx("p",{className:"text-xs mt-1",children:"Leave password field blank to keep current password unchanged"})]})]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:s?"Change Password (Optional)":"Set Password"}),e.jsx(D,{type:"password",name:"password",value:n.password,onChange:_,placeholder:s?"Leave blank to keep current password":"Enter a secure password...",required:!s,className:a.password?"border-red-500":""}),a.password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.password.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Confirm Password"}),e.jsx(D,{type:"password",name:"confirmPassword",value:A,onChange:_,placeholder:s?"Confirm new password if changing":"Re-enter the password...",required:!s||s&&n.password,className:a.confirmPassword?"border-red-500":""}),a.confirmPassword&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.confirmPassword.message})]})]}),f&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 animate-shake",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("span",{className:"text-red-400",children:"❌"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),e.jsx("div",{className:"mt-2 text-sm text-red-700 whitespace-pre-line",children:f})]})]})}),e.jsx(V,{type:"submit",className:"w-full !mt-6",disabled:i,children:i?e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:s?"Updating...":"Creating..."})]}):s?"Update User":"Create User"})]})}),oe=m.memo(({users:s,classes:h,points:b,onUpdate:d})=>{const{archiveUser:j,restoreUser:v}=W(),[i,t]=m.useState(!1),[f,g]=m.useState(void 0),[k,I]=m.useState(null),[C,M]=m.useState(null),[n,P]=m.useState({search:"",role:"",classId:"",sortBy:"firstName",sortOrder:"asc",includeArchived:!1}),{filteredUsers:A,isFiltering:o}=de(s,n);m.useMemo(()=>{const l={};if(!b)return l;for(const r of b){const w=r.studentId;w&&(l[w]=(l[w]||0)+(r.points||0))}return l},[b]),m.useMemo(()=>{const l={};return h&&h.forEach(r=>{l[r.id]=r.name}),l},[h]),m.useMemo(()=>{const l={};return h&&h.forEach(r=>{r.headTeacherId&&(l[r.headTeacherId]={classId:r.id,className:r.name})}),l},[h]);const a=()=>{g(void 0),t(!1),d()},x=async()=>{if(k)try{await j(k.id),d(),I(null)}catch(l){console.error("Error archiving user:",l)}},U=async()=>{if(C)try{await v(C.id),d(),M(null)}catch(l){console.error("Error restoring user:",l)}};return e.jsxs(e.Fragment,{children:[e.jsxs(se,{title:`User Management (${A.length})`,description:"Manage users, roles, and permissions across the system",icon:e.jsx(Q,{className:"h-6 w-6"}),actions:e.jsx(ie,{filters:n,onFiltersChange:P}),children:[o&&e.jsxs("div",{className:"mb-4 text-sm text-blue-600 bg-blue-50 p-2 rounded",children:["Filtering ",s.length," users..."]}),e.jsx(ce,{users:A,classes:h})]}),f&&e.jsx(ae,{isOpen:i,onClose:a,title:"Edit User",children:e.jsx(G,{user:f,users:s,classes:h,points:b,onDone:a})}),e.jsx(B,{isOpen:!!k,onClose:()=>I(null),onConfirm:x,title:"Confirm Archive",message:e.jsxs("p",{children:["Are you sure you want to archive ",e.jsx("strong",{children:k==null?void 0:k.name}),"?",e.jsx("br",{}),e.jsx("br",{}),"This will disable their account, preventing them from logging in. Their data will be preserved for historical records and can be restored later."]}),confirmText:"Confirm Archive",confirmVariant:"danger"}),e.jsx(B,{isOpen:!!C,onClose:()=>M(null),onConfirm:U,title:"Confirm Restore",message:e.jsxs("p",{children:["Are you sure you want to restore ",e.jsx("strong",{children:C==null?void 0:C.name}),"?",e.jsx("br",{}),e.jsx("br",{}),"They will be able to log in again."]}),confirmText:"Confirm Restore",confirmVariant:"secondary"})]})});G.displayName="UserForm";oe.displayName="UserManagement";export{oe as default};
